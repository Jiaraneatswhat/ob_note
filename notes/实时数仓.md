# 1. 数仓设计
## 1.1 维度表设计
- 离线数仓中，普通维度表通过主维表和相关维表做关联查询生成，对应的业务数据是通过每日一次<font color='skyblue'>全量同步</font>到 `HDFS` 中，只需每日做一次全量数据的关联查询
- 实时数仓采集的是所有表的变化数据，一旦主维表或相关维表中的某张数据表数据发生了变化，就需要和其他表的历史数据做关联
- 获取历史数据的方法：
	- 在某张与维度表相关的业务数据表发生变化时，执行一次 `maxwell-bootstrap` 命令，将相关业务维度表的数据导入 `Kafka`
		- 缺点：
			- `Kafka` 会存储冗余数据
			-  需要组件来执行 `maxwell-bootstrap` 命令
			- 数据进入流中的时间不同，可能会出现 `join` 不到的情况，影响时效性
	- 维度表发生变化时去 `HBase` 中读取关联后的维表，筛选出受影响的数据，与变更后的数据进行关联再写入 `HBase`
		- 缺点：一条数据发生变化后，受到影响的数据可能会特别多，影响效率
	- 将分表导入 `HBase`，在 `HBase` 中进行关联
		- 缺点：`HBase` 的 `join` 性能很差，关联操作不在 `Stream` 的 `DAG` 图中，需要单独调度
	- 综上，对业务表做 join 形成